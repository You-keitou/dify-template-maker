---
description: PRの作業記録を生成してコミット
allowed-tools: Bash(git diff), Bash(git log), Write, Read, Bash(git add), Bash(git commit), Bash(git push)
---

# PR作業記録の生成とコミット

PR番号: $ARGUMENTS

以下の手順で作業記録を生成し、PRに直接コミットしてください：

1. 要約ファイルの存在確認
```bash
ls -la ./claude-master-book/task-log/pr-$ARGUMENTS.md 2>/dev/null
```
存在する場合は何もせず終了

2. PRの差分を取得
```bash
git diff origin/main...HEAD --name-status
git diff origin/main...HEAD --stat
```

3. コミット履歴を確認
```bash
git log origin/main..HEAD --oneline --pretty=format:"%h %s"
```

4. ブランチ名を取得
```bash
git branch --show-current
```

5. 以下のObsidian形式でファイルを作成
パス: `./claude-master-book/task-log/pr-$ARGUMENTS.md`

```markdown
---
date: {{現在日時 YYYY-MM-DD}}
pr: $ARGUMENTS
branch: {{ブランチ名}}
tags: [claude-code, dify-template-maker, {{関連タグ}}]
---

# PR #$ARGUMENTS - {{PRのタイトル（コミットメッセージから推測）}}

## 概要
{{変更内容から推測される目的を記載}}

## 実装内容
{{git diffの結果を基に実装内容をリスト化}}
- [[{{機能名1}}]] - {{どのような変更か}}
- [[{{機能名2}}]] - {{どのような変更か}}

## 変更ファイル
{{git diff --name-statusの結果を整理}}
- 新規作成: {{新規ファイルリスト}}
- 修正: {{修正ファイルリスト}}
- 削除: {{削除ファイルリスト}}

## Claude Code活用のポイント
### 使用した機能
- Web検索: {{どのような情報を検索したか}}
- ファイル操作: {{どのような操作を行ったか}}
- コード生成: {{どのようなコードを生成したか}}

### 効率化のTips
- {{このPRで学んだClaude Codeの使い方}}
- {{次回以降に活かせるポイント}}

## 技術的な決定事項
{{実装で採用した技術的な判断とその理由}}

## 関連リンク
- [[前のタスク]] - {{あれば記載}}
- [[次のタスク]] - {{予定があれば記載}}
```

6. Git設定とコミット
```bash
git config --local user.email "github-actions[bot]@users.noreply.github.com"
git config --local user.name "github-actions[bot]"
git add ./claude-master-book/task-log/pr-$ARGUMENTS.md
git commit -m "docs: Add PR #$ARGUMENTS task summary

Generated by Claude Code"
git push origin HEAD
```

正常に完了したら「✅ PR #$ARGUMENTSの作業記録を生成しました」と出力